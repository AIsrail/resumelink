<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumeLink ‚Äî –¢–≤–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</title>

    <meta name="description" content="–ü—Ä–µ–≤—Ä–∞—Ç–∏ —Å–≤–æ–µ —Å–∫—É—á–Ω–æ–µ —Ä–µ–∑—é–º–µ –≤ —Å—Ç–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å –ø–æ–º–æ—â—å—é –ò–ò. Transform your boring resume into a stylish interactive profile with AI.">
    <meta name="keywords" content="—Ä–µ–∑—é–º–µ, —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ–∑—é–º–µ, resume builder, AI resume, ATS score, ResumeLink">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "ResumeLink",
      "description": "AI tool to transform PDF resumes into interactive profiles",
      "applicationCategory": "BusinessApplication",
      "offers": { "@type": "Offer", "price": "0" }
    }
    </script>

    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/favicon/site.webmanifest">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #000; color: #fff; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .card-item { border-radius: 24px; padding: 24px; transition: all 0.3s ease; border: 1px solid rgba(255, 255, 255, 0.05); }
        .card-item:hover { transform: translateY(-5px); border-color: rgba(59, 130, 246, 0.5); box-shadow: 0 10px 30px -10px rgba(59, 130, 246, 0.3); }
        .shimmer { background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent); background-size: 200% 100%; animation: shimmer 2s infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        .gradient-text { background: linear-gradient(135deg, #fff 0%, #3b82f6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const WORKER_URL = 'https://resumelink-worker.aisrail.workers.dev';

        const App = () => {
            const [step, setStep] = useState('upload');
            const [loading, setLoading] = useState(false);
            const [isEn, setIsEn] = useState(false);
            const [resumeData, setResumeData] = useState(null);

            useEffect(() => {
                const path = window.location.pathname.split('/')[1];
                if (path && path.length > 2) {
                    loadResume(path);
                }
            }, []);

            const loadResume = async (id) => {
                setLoading(true);
                try {
                    const res = await fetch(`${WORKER_URL}/${id}`);
                    const data = await res.json();
                    if (data) {
                        setResumeData(data);
                        setStep('result');
                    }
                } catch (e) { console.error(e); }
                setLoading(false);
            };

            const handleFileUpload = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                setLoading(true);
                
                try {
                    const reader = new FileReader();
                    reader.onload = async () => {
                        const typedarray = new Uint8Array(reader.result);
                        const pdf = await pdfjsLib.getDocument(typedarray).promise;
                        let fullText = "";
                        for (let i = 1; i <= Math.min(pdf.numPages, 5); i++) {
                            const page = await pdf.getPage(i);
                            const textContent = await page.getTextContent();
                            fullText += textContent.items.map(s => s.str).join(" ") + "\n";
                        }
                        processAI(fullText);
                    };
                    reader.readAsArrayBuffer(file);
                } catch (err) {
                    alert("Error reading PDF");
                    setLoading(false);
                }
            };

            const processAI = async (text) => {
                try {
                    const prompt = `Analyze text and extract into JSON. Target language: Same as source. 
                    JSON structure: {
                        "labels": {"summary": "Profile", "experience": "Experience", "education": "Education", "contacts": "Contacts", "languages": "Languages", "hobbies": "Hobbies", "links": "Links"}, 
                        "name": "", "title": "", "contacts": {"p": "", "e": "", "l": ""}, 
                        "socials": {"li": "", "gh": "", "tg": ""}, "summary": "", "atsScore": 85, 
                        "experience": [{"c": "", "p": "", "t": "", "d": ""}], 
                        "education": [{"s": "", "d": "", "y": ""}], 
                        "languages": [], "hobbies": [], 
                        "additional": []
                    } Text: ${text.substring(0, 9000)}`;

                    const res = await fetch(`${WORKER_URL}/generate`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ prompt })
                    });

                    const data = await res.json();
                    
                    if (data.error) throw new Error(data.error.message || "AI Error");

                    const rawText = data.candidates[0].content.parts[0].text;
                    const startIdx = rawText.indexOf('{');
                    const endIdx = rawText.lastIndexOf('}');
                    const parsedData = JSON.parse(rawText.substring(startIdx, endIdx + 1));
                    
                    parsedData.experience = parsedData.experience || [];
                    parsedData.education = parsedData.education || [];
                    parsedData.additional = parsedData.additional || [];

                    setResumeData(parsedData);
                    await autoPublish(parsedData);
                    setStep('result');
                } catch (err) { 
                    console.error(err);
                    alert("–û—à–∏–±–∫–∞: –ò–ò –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª—é—á–∞ (None) –≤ Google Cloud."); 
                }
                setLoading(false);
            };

            const autoPublish = async (data) => {
                try {
                    const res = await fetch(WORKER_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    const { id } = await res.json();
                    window.history.pushState({}, '', `/${id}`);
                } catch (e) { console.error(e); }
            };

            const L = resumeData?.labels || {
                summary: isEn ? "Profile" : "–ü—Ä–æ—Ñ–∏–ª—å",
                experience: isEn ? "Experience" : "–û–ø—ã—Ç",
                education: isEn ? "Education" : "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ",
                contacts: isEn ? "Contacts" : "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
                languages: isEn ? "Languages" : "–Ø–∑—ã–∫–∏",
                hobbies: isEn ? "Hobbies" : "–•–æ–±–±–∏",
                links: isEn ? "Links" : "–°—Å—ã–ª–∫–∏"
            };

            if (loading) return (
                <div className="h-screen flex flex-col items-center justify-center space-y-6">
                    <div className="w-20 h-20 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"></div>
                    <p className="text-blue-400 animate-pulse font-medium tracking-widest uppercase text-sm">
                        {isEn ? "AI Analyzing..." : "–ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç..."}
                    </p>
                </div>
            );

            if (step === 'upload') return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center">
                    <div className="absolute top-10 flex gap-4 glass p-1 rounded-full">
                        <button onClick={() => setIsEn(false)} className={`px-4 py-1 rounded-full transition ${!isEn ? 'bg-blue-600' : ''}`}>RU</button>
                        <button onClick={() => setIsEn(true)} className={`px-4 py-1 rounded-full transition ${isEn ? 'bg-blue-600' : ''}`}>EN</button>
                    </div>
                    
                    <h1 className="text-6xl md:text-8xl font-extrabold mb-6 gradient-text tracking-tighter">ResumeLink</h1>
                    <p className="text-gray-400 max-w-lg mb-12 text-lg">
                        {isEn ? "Transform your PDF into a premium interactive profile in seconds." : "–ü—Ä–µ–≤—Ä–∞—Ç–∏ —Å–≤–æ–π PDF –≤ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∑–∞ —Å–µ–∫—É–Ω–¥—ã."}
                    </p>

                    <label className="group relative cursor-pointer">
                        <div className="absolute -inset-1 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-1000"></div>
                        <div className="relative glass px-12 py-6 rounded-2xl flex items-center space-x-4">
                            <span className="text-3xl">üìÑ</span>
                            <span className="text-xl font-semibold">{isEn ? "Upload Resume" : "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—é–º–µ"}</span>
                        </div>
                        <input type="file" className="hidden" accept=".pdf" onChange={handleFileUpload} />
                    </label>
                </div>
            );

            return (
                <div className="max-w-5xl mx-auto p-4 md:p-10">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        
                        <div className="card-item col-span-1 md:col-span-2 bg-gradient-to-br from-blue-600/10 to-transparent">
                            <div className="flex justify-between items-start mb-8">
                                <div>
                                    <h1 className="text-4xl font-extrabold mb-2 tracking-tight">{resumeData.name}</h1>
                                    <p className="text-blue-400 font-medium text-lg uppercase tracking-wider">{resumeData.title}</p>
                                </div>
                                <div className="glass px-4 py-2 rounded-xl text-center">
                                    <div className="text-xs text-gray-400 uppercase tracking-widest mb-1">ATS Score</div>
                                    <div className="text-2xl font-bold text-green-400">{resumeData.atsScore}</div>
                                </div>
                            </div>
                            <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest mb-4">{L.summary}</h3>
                            <p className="text-gray-300 leading-relaxed text-lg">{resumeData.summary}</p>
                        </div>

                        <div className="card-item glass space-y-6">
                            <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest">{L.contacts}</h3>
                            <div className="space-y-4">
                                <div className="flex items-center gap-3">
                                    <span className="w-10 h-10 glass rounded-lg flex items-center justify-center">üìû</span>
                                    <span className="text-gray-300">{resumeData.contacts.p}</span>
                                </div>
                                <div className="flex items-center gap-3">
                                    <span className="w-10 h-10 glass rounded-lg flex items-center justify-center">‚úâÔ∏è</span>
                                    <span className="text-gray-300">{resumeData.contacts.e}</span>
                                </div>
                                <div className="flex items-center gap-3">
                                    <span className="w-10 h-10 glass rounded-lg flex items-center justify-center">üìç</span>
                                    <span className="text-gray-300">{resumeData.contacts.l}</span>
                                </div>
                            </div>
                        </div>

                        <div className="card-item col-span-1 md:col-span-2 space-y-8">
                            <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest">{L.experience}</h3>
                            {resumeData.experience.map((exp, i) => (
                                <div key={i} className="relative pl-8 border-l border-white/10 space-y-2">
                                    <div className="absolute -left-1.5 top-1.5 w-3 h-3 bg-blue-500 rounded-full shadow-[0_0_15px_#3b82f6]"></div>
                                    <div className="flex justify-between items-start">
                                        <h4 className="font-bold text-xl">{exp.p}</h4>
                                        <span className="text-xs font-bold text-gray-500 uppercase tracking-widest bg-white/5 px-2 py-1 rounded">{exp.d}</span>
                                    </div>
                                    <div className="text-blue-400 font-medium">{exp.c}</div>
                                    <p className="text-gray-400 text-sm leading-relaxed">{exp.t}</p>
                                </div>
                            ))}
                        </div>

                        <div className="space-y-6">
                            <div className="card-item glass">
                                <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest mb-6">{L.education}</h3>
                                {resumeData.education.map((edu, i) => (
                                    <div key={i} className="mb-4 last:mb-0">
                                        <div className="font-bold text-sm">{edu.s}</div>
                                        <div className="text-gray-400 text-xs">{edu.d} ‚Ä¢ {edu.y}</div>
                                    </div>
                                ))}
                            </div>

                            <div className="card-item glass">
                                <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest mb-4">{L.languages}</h3>
                                <div className="flex flex-wrap gap-2">
                                    {resumeData.languages.map((lang, i) => (
                                        <span key={i} className="bg-white/5 px-3 py-1 rounded-full text-xs font-semibold">{lang}</span>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {resumeData.additional && resumeData.additional.length > 0 && (
                            <div className="card-item col-span-1 md:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-8">
                                {resumeData.additional.map((block, i) => (
                                    <div key={i} className="space-y-3">
                                        <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest">{block.title}</h3>
                                        <p className="text-gray-300 text-sm leading-relaxed">{block.content}</p>
                                    </div>
                                ))}
                                {resumeData.hobbies && resumeData.hobbies.length > 0 && (
                                    <div className="space-y-3">
                                        <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest">{L.hobbies}</h3>
                                        <p className="text-gray-300 text-sm">{resumeData.hobbies.join(", ")}</p>
                                    </div>
                                )}
                            </div>
                        )}

                        <div className="card-item col-span-1 md:col-span-3 flex items-center justify-between bg-gradient-to-br from-[#111] to-[#1a1a1a]">
                            <div className="space-y-4 w-full">
                                <h3 className="text-blue-400 text-[12px] font-bold uppercase tracking-widest">{L.links}</h3>
                                <div className="flex gap-3 text-2xl">
                                    <a href={resumeData.socials?.li || "#"} target="_blank">üîó</a>
                                    <a href={resumeData.socials?.gh || "#"} target="_blank">üêô</a>
                                    <a href={resumeData.socials?.tg || "#"} target="_blank">‚úàÔ∏è</a>
                                </div>
                            </div>
                            <div className="bg-white p-2 rounded-2xl shrink-0">
                                <img src={`https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=${encodeURIComponent(window.location.href)}`} alt="QR" />
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
